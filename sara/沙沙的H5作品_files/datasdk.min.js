var dataSDK=function(){function e(e,t){for(var n={},i=0;i<t.length;i++){var r=new RegExp("(^|&)"+t[i]+"=([^&]*)(&|$)"),o=e.match(r),a="";null!=o&&(a=decodeURIComponent(o[2])),n[t[i]]=a}return n}function t(e){var t=document.createElement("script");t.setAttribute("type","text/javascript"),t.src=e;try{var n=document.getElementsByTagName("script").fiboDataSDK;n.parentNode.insertBefore(t,n)}catch(i){console.log("请将斐波sdk的script放在body中")}}function n(e,n){var i=I;i=r(i,"appId",N.pfid),i=r(i,"pageId",N.appid),"true"===N.debug&&(i=r(i,"debug","true")),i=r(i,"sui",C.sui),i=r(i,"cnl",C.cnl);var a={eventType:e,eventTime:(new Date).getTime()};o(n)&&(a.eventArgs=n),x.push(a),i=r(i,"rpEventList",JSON.stringify(x)),i=r(i,"referrer",encodeURIComponent(document.referrer));var s=S.get("rp");null==s&&(s=""),i=r(i,"rp",s);var c=S.get("ext");if(null==c&&(c=""),i=r(i,"ext",c),i=r(i,"url",encodeURIComponent(location.href)),"unload"===e||"exit"===e){var d=new Image;return d.src=i,void(x=[])}i=r(i,"callback","dataSDK.logCb"),t(i),x=[]}function i(){var e=T,n=S.get("rp");null==n&&(n=""),e=r(e,"rp",n);var i=S.get("ext");null==i&&(i=""),e=r(e,"callback","dataSDK.checkIdCb"),t(e)}function r(e,t,n){return void 0!=n&&null!=n||(n=""),-1!=e.indexOf("?")||-1!=e.indexOf("=")?e+"&"+t+"="+n:e+"?"+t+"="+n}function o(e){return null===e||"object"!=typeof e?!1:!Object.keys||0!==Object.keys(e).length}function a(){var e,t=8,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=[],r=n.length;for(e=0;t>e;e++)i[e]=n[0|Math.random()*r];return i.join("")}function s(e){o(e)&&n("userinfo",e)}function c(e,t){return void 0===t&&(t="1"),e.data?void n("formInfo",{formInfo:e}):void(o(e)&&n("formInfo",{formInfo:{data:e,version:t}}))}function d(e){if(o(e)){var t=/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/;e.idno&&t.test(e.idno)&&(e.idno=""),e.gender&&/^(0|1|2)$/.test(e.gender)&&(e.gender="0"),n("idInfo",{name:e.name,phone:e.phone,addr:e.addr,idno:e.idno,gender:e.gender})}}function l(e){var t=/^[1][34578]\d{9}$/;if("string"==typeof e||t.test(e)){var i={phone:e};n("setphone",i)}}function u(e){var t=e||location.href;try{var n="";if(-1!=t.indexOf("#")){var i=t.split("#");n=i[1],t=i[0]}var o=C.lc,s="",c=C.cnl;return o=""===o?1:parseInt(o,10)+1,(isNaN(o)||0===o)&&(o=1),s=S.get("rp"),null===s&&(s=a(),S.add("rp",s,1e4)),t=-1!=t.indexOf("lc=")?t.replace(/lc=\d{1,5}/,"lc="+o):r(t,"lc",o),t=-1!=t.indexOf("sui=")?t.replace(/sui=[a-zA-Z0-9]{8}/,"sui="+s):r(t,"sui",s),""!==c&&-1===t.indexOf("cnl=")&&(t=r(t,"cnl",c)),""!=n&&(t+="#"+n),t}catch(d){return e}}function p(e){var t=(new Date).getTime()-b,i={staytm:t,useragent:D.device};/^(timeline|friend|qq|txweibo|qzone)$/.test(e)&&(i.shareType=e),n("share",i)}function g(e,t,i){if(!(isNaN(e)||isNaN(t)||isNaN(i)||0>=e||0>=t||0>=i||e>i||t>i||e==t)){var r=(new Date).getTime(),o=r-b;if(b=r,!(0>o)){var a={ctp:e,tgp:t,ttp:i,staytm:o};n("switchpage",a)}}}function f(e){var t={};void 0===e||isNaN(e)||0>e||(t={currentPage:e}),n("exit",t)}function v(e,t){var i=e.replace(/[#&]/g,"_"),r=t.replace(/[#&]/g,"_");if(n("linkclick",{btname:i,remark:r}),event&&"A"===event.target.tagName&&/^http/.test(event.target.href)){var o=event.target.href;event.preventDefault(),setTimeout(function(){location.href=o},200)}}function m(e){if(200===e.retCode){var t=e.rp,n=e.ext;""!==t&&"null"!==t&&S.add("rp",t,1e4),""!==n&&"null"!==n&&S.add("ext",n,1e4)}}function h(e){if(200===e.retCode){var t=e.rp,i=e.ext;if(""!==t&&"null"!==t&&S.add("rp",t,1e4),"true"!==N.blext)return void n("view",A);if(""===i||"null"===i||"undefined"===i||void 0===i){var r="http://col.fibodata.com/weixin/callback?surl="+encodeURIComponent(window.location.href),o=encodeURIComponent(r);return void(location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx94ec6057d5a4a719&redirect_uri="+o+"&response_type=code&scope=snsapi_base&state=#wechat_redirect")}S.add("ext",i,1e4),n("view",A)}}function w(e){if("[object Array]"===toString.call(e)){var t=encodeURIComponent(e.toString());n("tag",{tags:t})}}var x=[],b=0,y=(new Date).getTime(),I="http://col.fibodata.com/logdataservlet",T="http://col.fibodata.com/tolog/gaindata",S={get:function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!=t?decodeURIComponent(t[2]):null},add:function(e,t,n){var i=e+"="+encodeURIComponent(t)+";";if(0!=n){var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3),i+="expires="+r.toGMTString()}i+=";path=/",document.cookie=i}},C=function(){var t=window.location.search.substr(1),n=["lc","sui","cnl","debug","from"],i=e(t,n);return i}(),N=function(){var t=document.getElementById("fiboDataSDK").src.split("?")[1],n=["pfid","appid","blext","debug","auth"];return e(t,n)}(),O=window.screen.width||0,R=window.screen.height||0,P=window.devicePixelRatio||0,D=function(){var e=window.navigator&&window.navigator.userAgent;if(!e)return{};var t=/MicroMessenger/i.test(e),n="";t&&(n="Weixin"),/Weibo/i.test(e)&&(n="Weibo"),/Qzone/i.test(e)&&(n="Qzone"),/QQ\/\d/i.test(e)&&(n="QQ"),/NewsArticle/i.test(e)&&(n="NewsArticle");var i="";if("Weixin"===n||"QQ"===n){var r=navigator.userAgent.match(/NetType\/[a-z0-9A-Z_]+/);null!==r&&(i=r[0].split("/")[1])}var o="pc";/iPhone/i.test(e)&&(o="iphone"),/(iPad|iPod)/i.test(e)&&(o="ipad"),/Android/i.test(e)&&(o="android"),/Windows Phone/i.test(e)&&(o="WP");var a,s,c="",d="";if("android"===o){try{a=/(Linux(.)*\) )/.exec(e)[0].split(";"),s=a[a.length-1],s=s.split(")")[0].substr(1),c=s,d=s}catch(l){}c=function(e){return/GT-|SM-|SCH-/gi.test(e)?"samsung":/HM|RedMi|Mi/gi.test(e)?"xiaomi":/huawei|honor/gi.test(e)?"Huawei":/vivo/gi.test(e)?"vivo":/Meitu/gi.test(e)?"Meitu":/OPPO|R6|R7|R8/gi.test(e)?"OPPO":/Coolpad|SK1/gi.test(e)?"Coolpad":/ASUS/gi.test(e)?"ASUS":/ZTE/gi.test(e)?"ZTE":/HTC/gi.test(e)?"HTC":/Sony/gi.test(e)?"Sony":/Lenovo/gi.test(e)?"Lenovo":/NX5/gi.test(e)?"nubia":/m([0-9cx]{1,4})/gi.test(e)||/PRO 5/g.test(e)?"meizu":e}(c);var u,p=d.search("Build");-1!==p&&(u=d.substr(0,p)),u&&(u=u.replace(/^[\s\t ]+|[\s\t ]+$/g,""),c===d&&(c=u))}else"iphone"===o&&(c="iphoneOther",320===O&&(480===R&&(c=2===P?"iphone4x":"iphoneOther"),568===R&&(c="iphone5x")),375===O&&(c="iphone6x"),414===O&&(c="iphone6xp"));return{isWeixin:t,appSrc:n,netType:i,device:o,model:c,mdetail:u||""}}(),k=Math.max(O,R)*P<=2560?(window.screen.width||0)*(window.devicePixelRatio||0)+"x"+(window.screen.height||0)*(window.devicePixelRatio||0):(window.screen.width||0)+"x"+(window.screen.height||0);sessionStorage?""!==C.lc||""!==C.cnl||""!==C.sui?(sessionStorage.setItem("lc",C.lc),sessionStorage.setItem("sui",C.sui),sessionStorage.setItem("cnl",C.cnl),sessionStorage.setItem("from",C.from)):(C.lc=sessionStorage.getItem("lc")||"",C.sui=sessionStorage.getItem("sui")||"",C.cnl=sessionStorage.getItem("cnl")||"",C.from=sessionStorage.getItem("from")||""):""!==C.lc||""!==C.cnl?(S.add("lc",C.lc),S.add("sui",C.sui),S.add("cnl",C.cnl),S.add("from",C.from)):(C.lc=S.get("lc")||"",C.sui=S.get("sui")||"",C.cnl=S.get("cnl")||"",C.from=S.get("from")||""),"null"===C.lc&&(C.lc=""),"null"===C.cnl&&(C.cnl=""),"null"===C.sui&&(C.sui=""),C.cnl.length>12&&(C.cnl=C.cnl.substr(0,12));var A={isWeixin:D.isWeixin,useragent:D.device,lc:parseInt(C.lc,10)||0,shareType:C.from,netType:D.netType,appSrc:D.appSrc,screen:k,model:D.model,mdetail:D.mdetail};"groupmessage"!==A.shareType&&"singlemessage"!==A.shareType&&"timeline"!==A.shareType&&(A.shareType="");var U="true"===N.auth;D.isWeixin&&U&&""===A.shareType&&(A.shareType="gzh");var M=document.referrer;return-1==M.indexOf("mp.weixin.qq.com")&&-1==M.indexOf("mp.weixinbridge.com")||(A.shareType="gzh"),b=(new Date).getTime(),D.isWeixin&&"true"===N.blext?i():n("view",A),window.addEventListener&&window.addEventListener("unload",function(){n("unload",{staytm:(new Date).getTime()-y})},!1),{pushUserInfo:s,saveFormInfo:c,dealUrl:u,preShareUrl:u,share:p,switchPage:g,exitPage:f,btnClick:v,saveCellPhone:l,pushTags:w,logCb:m,checkIdCb:h,pushIdentity:d}}();